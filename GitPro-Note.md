### 什么是版本控制？

版本控制是一种记录一个或若干文件内容变化，以便未来查阅特定版本修订情况的系统。

早期的版本控制系统多为**本地版本控制系统**，主要用本地数据库记录文件的历次更新差异。为了让多个开发者能协同工作，**集中化的版本控制系统**应运而生。协同工作的人们通过客户端连接到同一台服务器上，取出最新的文件或提交更新。然而，当中心服务器发生故障时，协同工作不仅无法进行，而且由于整个项目的记录被保存在单一位置，也会存在丢失所有历史更新记录的风险。因此，**分布式版本控制系统**出现了。在该类系统中，客户端不仅读取最新的文件快照，而且会镜像下完整的项目，即每一次的克隆操作，都是对整个项目仓库的完整备份。



### Git的基本思想

Git与其它版本控制系统的主要差别在于Git对待数据的方法。大多数系统以文件变更列表的方式保存信息，即保存一组基本文件，对每个文件随时间逐步累积的差异进行记录，然后根据差异计算出不同版本的文件内容。

Git则是把数据看做是对文件系统的一次**快照**。每次提交更新时，Git对当时的全部文件制作一个快照并保存该快照的索引，具体做法是把出现变更的文件重新储存，对于未修改的文件，则不再重新存储，而是只保留一个链接指向之前存储的文件。当要查看某一中间版本的文件内容时，Git直接根据ID取出对应文件，无需再根据差异对文件内容进行计算，因此**Git要快于其他的版本控制系统。**

此外，本地存有整个项目的完整历史，因此大部分操作都只需要访问本地文件和资源。在所有数据存储前，Git会计算一个校验和，然后以校验和来引用。若数据传输过程中发生错误，Git就能发现。Git计算校验和的机制为哈希散列，哈希值根据文件内容计算得出。特别地，Git数据库中保存的信息都**以文件的哈希值来进行索引**，而不是文件名。



### Git的三种状态

文件始终处于三种状态，即**已提交(commited)、已修改(modified)和已暂存(staged)。**

已提交表示数据已经安全地保存在本地数据库中。

已修改表示修改了文件，但还没保存到数据库。

已暂存表示对一个已修改文件的当前版本做了标记，使其包含在下次提交的快照中。



### Git项目的三个工作区域

根据Git文件的三种状态，引入Git项目的三个工作区域的概念：**Git仓库(Repository)、工作目录(Working Directory)以及暂存区域(Staged Area)。**

Git仓库保存项目元数据和对象数据库，从其他计算机克隆仓库时，拷贝的就是这里的数据。

工作目录是对项目的某个版本独立提取出来的内容，存在本地磁盘上供用户使用或修改。

暂存区域是一个文件，它保存了下次将提交的文件列表信息。

> **Git的基本工作流程**
>
> 1. 在工作目录中修改文件
> 2. 暂存文件，将文件快照放入暂存区域
> 3. 提交更新，找到暂存区域的文件快照，将其永久性存储到Git仓库

若Git仓库中保存着特定版本的文件，就属于**已提交状态。**若做了修改并放入了暂存区域，则属于**已暂存状态。**若取出文件后，做了修改但没有放入暂存区，则为**已修改状态。**



### 初次运行前

Git自带一个**git config**的工具来进行配置，配置文件主要存储在三个位置：

1. ==/etc/config==文件：包含系统上每一个用户及他们仓库的通用配置，可通过带有--system选项的git config命令从该文件读取配置；
2. ==~/.gitconfig==文件：只针对当前用户，可通过--global选项让Git读写该文件；
3. 当前正在使用的仓库目录下存在一个==.git/config==文件，该配置文件只针对该仓库。

#### 一些初始设置

若使用--global选项，那么该命令只需要运行一次，之后Git会一直使用这些信息。

```bash
git config --global user.name "Kakashi"
git config --global user.email Kakashi@Hokaki.com
git config --global core.editor vim
```

若执行上述命令，相应的配置信息会写入~/.config文件。需要检查配置信息时，执行以下命令即可：

```bash
git config --list
```

